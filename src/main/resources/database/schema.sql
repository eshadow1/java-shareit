
CREATE TABLE IF NOT EXISTS users (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
name VARCHAR(255) NOT NULL,
email VARCHAR(512) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS requests (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
description VARCHAR(512) NOT NULL,
requestor_id BIGINT NOT NULL REFERENCES users (id) on delete cascade
);

CREATE TABLE IF NOT EXISTS items (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
name VARCHAR(255) NOT NULL,
description VARCHAR(512) NOT NULL,
is_available BOOLEAN NOT NULL,
owner_id BIGINT NOT NULL REFERENCES users (id) on delete cascade,
request_id BIGINT REFERENCES requests (id) on delete cascade
);

CREATE TABLE IF NOT EXISTS bookings (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
start_date DATE NOT NULL,
end_date DATE NOT NULL,
item_id BIGINT NOT NULL REFERENCES items (id) on delete cascade,
booker_id BIGINT NOT NULL REFERENCES users (id) on delete cascade,
status VARCHAR(512) NOT NULL
);

CREATE TABLE IF NOT EXISTS comments (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
text VARCHAR(255) NOT NULL,
item_id BIGINT NOT NULL REFERENCES items (id) on delete cascade,
author_id BIGINT NOT NULL REFERENCES users (id) on delete cascade
);